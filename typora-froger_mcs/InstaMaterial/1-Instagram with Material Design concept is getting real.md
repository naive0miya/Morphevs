# InstaMaterial æ¦‚å¿µ(ç¬¬1éƒ¨åˆ†) - å¼€å§‹

>åŸæ–‡ (mirekstanek.online) ï¼š [Instagram with Material Design concept is getting real](https://mirekstanek.online/instagram-with-material-design-concept-is-getting-real/)
>ä½œè€… ï¼š [Mirek Stanek](https://twitter.com/froger_mcs)  

[TOC]

å‡ ä¸ªæœˆå‰ï¼Œåœ¨è°·æ­Œæ¨å‡ºäº†ç§»åŠ¨è®¾è®¡å’Œç½‘é¡µè®¾è®¡çš„æ–°è®¾è®¡æŒ‡å—ä¹‹åï¼Œè®¾è®¡å¸ˆ Emmanuel Pacamalan åˆ¶ä½œäº†ä¸€ä¸ªæ¦‚å¿µè§†é¢‘ï¼Œå±•ç¤º Instagram å¯¹ Android çš„å®šä¹‰ï¼š

<iframe width="560" height="315" src="https://youtu.be/ojwdmgmdR_Q" frameborder="0" allowfullscreen></iframe>

è™½ç„¶è¿™åªæ˜¯ä¸€ä¸ªå›¾å½¢åŸå‹ï¼Œä¸€äº›äººå¼€å§‹æ€€ç–‘æ˜¯å¦æœ‰å¯èƒ½ä»¥ç›¸å¯¹ç®€å•çš„æ–¹å¼åœ¨å®é™…åº”ç”¨ä¸­å®ç°è¿™ä¸€ç‚¹ã€‚ å—¯ï¼Œæ˜¯çš„ã€‚ ä¸ä»…ä»…æ˜¯åœ¨æœ€æ–°çš„å®‰å“æ“ä½œç³»ç»Ÿ Lillipop ä¸Šã€‚ äº‹å®ä¸Šï¼Œè‡ªä» Android 4å‘å¸ƒä»¥æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¤§éƒ¨åˆ†æ˜¾ç¤ºçš„å›¾å½¢å’ŒåŠ¨ç”»æ•ˆæœã€‚

æ ¹æ®è¿™ä¸ªï¼Œæˆ‘æƒ³å¼€å§‹ä¸€ç³»åˆ—æ–°çš„å¸–å­ï¼Œåœ¨è¿™äº›æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨çœŸæ­£çš„ Android è®¾å¤‡ä¸Šç”¨ [Material Design é‡ç° INSTAGRAM](https://www.youtube.com/watch?v=ojwdmgmdR_Q)ã€‚å½“ç„¶ï¼Œç”±äºæ˜¾è€Œæ˜“è§çš„åŸå› ï¼Œæˆ‘ä»¬å°†ä¸ºè¿™ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºå‰ç«¯æ¨¡å‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šå°½å¯èƒ½åœ°å¤åˆ¶å°½å¯èƒ½å¤šçš„ç»†èŠ‚ã€‚

## å¼€å§‹é¡¹ç›®
åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³é‡ç°å±•ç¤ºæ¦‚å¿µçš„å‰7ç§’ã€‚ æˆ‘è®¤ä¸ºè¿™æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå…³äºæˆ‘ä»¬ä¹Ÿå¿…é¡»å‡†å¤‡å’Œé…ç½®æˆ‘ä»¬çš„é¡¹ç›®ã€‚

æˆ‘å¸Œæœ›ä½ ä»¬è®°ä½ï¼Œæ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸æ˜¯å”¯ä¸€å¯è¡Œçš„æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯æˆ‘æœ€å–œæ¬¢çš„ã€‚ æˆ‘ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¹³é¢è®¾è®¡å¸ˆï¼Œæ‰€ä»¥æˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯ä»å…¬å…±èµ„æºï¼ˆä¸»è¦æ¥è‡ª Material Design [èµ„æºé¡µé¢](http://www.google.com/design/spec/resources/sticker-sheets-icons.html)ä¸Šçš„ ï¼‰ã€‚

å¥½çš„ï¼Œè¿™é‡Œæœ‰æˆªå›¾å’Œä¸¤ä¸ªçŸ­ç‰‡(åœ¨ android 4å’Œ5ä¸Šæ‹æ‘„)æ˜¾ç¤ºäº†æˆ‘ä»¬çš„æœ€ç»ˆæ•ˆæœ:

![|center](http://frogermcs.github.io/images/2/screen-21.png)
![|center](http://frogermcs.github.io/images/2/screen-pre21.png)

<iframe width="560" height="315" src="https://youtu.be/eQwFwJ4Glyc" frameborder="0" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://youtu.be/DNT7j0JjrtE" frameborder="0" allowfullscreen></iframe>

## å‡†å¤‡åº”ç”¨ç¨‹åº
åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€äº›ç”¨äº Android å¼€å‘çš„æµè¡Œå·¥å…·å’Œåº“ã€‚ä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶æˆ‘ä»¬éƒ½ä¼šåœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘æƒ³å°½å¯èƒ½é¿å…åœ¨ä¸ä¹…çš„å°†æ¥å¤„ç†æ„å»ºæ–‡ä»¶ã€‚

#### åˆå§‹é¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„ Android é¡¹ç›®ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨äº† Android Studio å’Œ gradle æ„å»ºç³»ç»Ÿã€‚ æœ€å°ç‰ˆæœ¬çš„ Android SDK ä¸º15(Android 4.0.4)ã€‚

ä¹‹åï¼Œæˆ‘å°†æ·»åŠ ä¸€äº›ä¾èµ–å’Œ utilsã€‚æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„è¦è¯´çš„ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½ æœ‰å®Œæ•´çš„ build.gradle å’Œ app / build.gradle æ–‡ä»¶çš„æºä»£ç ï¼š
```groovy
//  build.gradle
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.14.0'
        classpath 'com.jakewharton.hugo:hugo-plugin:1.1.+'
    }
}

allprojects {
    repositories {
        jcenter()
    }
}
```

```groovy
//  app/build.gradle
apply plugin: 'com.android.application'
apply plugin: 'hugo'

android {
    compileSdkVersion 21
    buildToolsVersion "21.1"

    defaultConfig {
        applicationId "io.github.froger.instamaterial"
        minSdkVersion 15
        targetSdkVersion 21
        versionCode 1
        versionName "1.0"
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])

    compile "com.android.support:appcompat-v7:21.0.0"
    compile 'com.android.support:support-v13:21.+'
    compile 'com.android.support:support-v4:21.+'
    compile 'com.android.support:palette-v7:+'
    compile 'com.android.support:recyclerview-v7:+'
    compile 'com.android.support:cardview-v7:21.0.+'
    compile 'com.jakewharton:butterknife:5.1.2'
    compile 'com.jakewharton.timber:timber:2.5.0'
    compile 'com.facebook.rebound:rebound:0.3.6'
}
```
æ€»ä¹‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæœ‰ï¼š
- ä¸€å †æ”¯æŒåº“ï¼ˆCardViewï¼ŒRecyclerViewï¼ŒPaletteï¼ŒAppCompatï¼‰ - æˆ‘æƒ³ä½¿ç”¨æœ€æ–°çš„ç”¨æˆ·ç•Œé¢ç»„ä»¶ã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ ListViewï¼ŒActionBar æˆ–ç®€å•çš„ View / FrameViewï¼Œé‚£ä¸æ˜¯é—®é¢˜ã€‚ä½†æ²¡å¿…è¦ï¼Ÿ ğŸ˜‰
- [ButterKnife ](http://jakewharton.github.io/butterknife/)- è§†å›¾æ³¨å…¥ï¼Œä¸ºæ›´ç®€æ´çš„ä»£ç ï¼ˆå³æˆ‘ä»¬ä¸å¿…å†™ findViewById () ) æ¥è·å–è§†å›¾å¼•ç”¨ï¼Œä½†å®ƒä¹Ÿæä¾›æ›´å¼ºå¤§çš„æ–¹æ³•ï¼Œå¦‚ onCli () æ³¨å…¥ç­‰ã€‚
- [Rebound ](http://facebook.github.io/rebound/)- æˆ‘ä»¬ä¸ä¼šåœ¨ç›®å‰çš„æ–‡ç« ä¸­ä½¿ç”¨è¿™ä¸ªåº“ï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘ä»¬ä¼šåœ¨ä¸ä¹…çš„å°†æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ è¿™æ˜¯æ¥è‡ª Facebook çš„å¼ºå¤§çš„åº“ï¼Œå¯ä»¥å¸®åŠ©ä½ ä½¿åŠ¨ç”»æ›´åŠ è‡ªç„¶ï¼ˆå®ƒæä¾›äº†å¼¹æ€§çš„åŠ¨ç”»å·¥å…· - åªéœ€ä» Facebook Messenger ä¸­æ£€æŸ¥èŠå¤©å¤´çš„åŠ¨ç”»æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥ç¡®ä¿ä½ æƒ³è¦åœ¨ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼‰
- [Timer](https://github.com/JakeWharton/timber) å’Œ [Hugo](https://github.com/JakeWharton/hugo) - åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰å¿…è¦ã€‚æˆ‘åªç”¨å®ƒä»¬æ¥è®°å½•æ—¥å¿—ã€‚

## å›¾åƒèµ„æº
åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† Material Design èµ„æºä¸­çš„ä¸€äº›å›¾æ ‡ã€‚ æˆ‘è¿˜åœ¨ Instagram ä¸Šåšäº† GoPro ä¸ªäººèµ„æ–™çš„æˆªå›¾ï¼Œä»¥æä¾›æˆ‘ä»¬çš„ Feed çš„æ¨¡å‹ã€‚ åº”ç”¨ç¨‹åºå›¾æ ‡æ˜¯ä» [INSTAGRAM ä¸ææ–™è®¾è®¡](https://www.youtube.com/watch?v=ojwdmgmdR_Q)è§†é¢‘ä¸­é€‰å–çš„ã€‚ è¿™é‡Œæ˜¯é¡¹ç›®ä¸­ä½¿ç”¨çš„[ä¸€å¤§å †å›¾åƒ](https://github.com/frogermcs/frogermcs.github.io/raw/master/files/2/resources.zip)ï¼ˆç°åœ¨æ˜¯æ•´ä¸ª drawable-xxdpi ç›®å½•ï¼‰ã€‚

#### é£æ ¼
è®©æˆ‘ä»¬ä»å®šä¹‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„é»˜è®¤æ ·å¼å¼€å§‹ã€‚ ä¸º Android 4å’Œ5æä¾› Material Desing æ ·å¼åŸºç¡€çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä» Theme.AppCompat.NoActionBar æˆ– Theme.AppCompat.Light.NoActionBar ç»§æ‰¿ã€‚ ä¸ºä»€ä¹ˆ NoActionBarï¼Ÿæ–°çš„ SDKï¼ˆå’Œå…¼å®¹åº“ï¼‰ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å®ç° ActionBar æ¨¡å¼çš„æ–°æ–¹æ³•ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Toolbar å°éƒ¨ä»¶ï¼ŒåŸå› å¾ˆç®€å• - ä¸ ActionBar ç›¸æ¯”ï¼Œå®ƒæ˜¯æ›´å¥½æ›´çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä¸ä¼šæ·±å…¥ç»†èŠ‚ã€‚ ç›¸åï¼Œæ‚¨å¯ä»¥åœ¨Android å¼€å‘è€…åšå®¢ä¸Šé˜…è¯»å…³äº [AppCompat v21](http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html) çš„æœ€æ–°å¸–å­ã€‚

åŸºäºæ¦‚å¿µç”µå½±ï¼Œæˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬çš„ AppTheme å®šä¹‰ä¸‰ç§åŸºæœ¬é¢œè‰²ï¼š
```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- styles.xml-->
<resources>
    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="colorPrimary">@color/style_color_primary</item>
        <item name="colorPrimaryDark">@color/style_color_primary_dark</item>
        <item name="colorAccent">@color/style_color_accent</item>
    </style>
</resources>
```

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--colors.xml-->
<resources>
    <color name="style_color_primary">#2d5d82</color>
    <color name="style_color_primary_dark">#21425d</color>
    <color name="style_color_accent">#01bcd5</color>
</resources>
```

æœ‰å…³è¿™äº›é¢œè‰²çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚é˜…[â€œæè´¨ä¸»é¢˜è°ƒè‰²æ¿â€æ–‡æ¡£](http://developer.android.com/training/material/theme.html#ColorPalette)ã€‚

## å¸ƒå±€
æˆ‘ä»¬ç›®å‰çš„é¡¹ç›®å°†ç”±3ä¸ªä¸»è¦å¸ƒå±€å…ƒç´ æ„å»º:

- Toolbar - å¸¦æœ‰å¯¼èˆªå›¾æ ‡å’Œåº”ç”¨æ ‡å¿—çš„å·¥å…·æ é¡¶æ 
- RecyclerView - ç”¨äºæ˜¾ç¤º Feed
- Floating Action Button - ç®€å•çš„ ImageButtonï¼Œå®ç°äº† Material Design ä¸­å¼•å…¥çš„æ–°[åŠ¨ä½œæŒ‰é’®æ¨¡å¼](http://www.google.com/design/spec/components/buttons.html#buttons-flat-raised-buttons)ã€‚

åœ¨æˆ‘ä»¬å¼€å§‹å®ç°æˆ‘ä»¬çš„å¸ƒå±€ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åœ¨ res / values / dimens.xml ä¸­å®šä¹‰ä¸€äº›é»˜è®¤å€¼ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--dimens.xml-->
<resources>
    <dimen name="btn_fab_size">56dp</dimen>
    <dimen name="btn_fab_margins">16dp</dimen>
    <dimen name="default_elevation">8dp</dimen>
</resources>
```
è¿™äº›å°ºå¯¸åŸºäº Material Design æŒ‡å—å¼•å…¥çš„å€¼ã€‚

å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å®ç° MainActivity çš„å¸ƒå±€äº†:

å…³äºä»¥ä¸Šä»£ç çš„ä¸€äº›è§£é‡Šï¼š
- Toolbar æœ€æ£’çš„åœ°æ–¹åœ¨äºç°åœ¨å®ƒæ˜¯æ´»åŠ¨å¸ƒå±€å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¹Ÿæ‰©å±•äº† ViewGroupï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢æ”¾ç½®ä¸€äº› UI å…ƒç´ ï¼ˆä»–ä»¬å°†ä½¿ç”¨å‰©ä½™çš„è‡ªç”±ç©ºé—´ï¼‰ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æ”¾ç½® logo å›¾åƒã€‚ æ­¤å¤–ï¼Œè™½ç„¶ Toolbar æ˜¯æ¯” ActionBar æ›´çµæ´»çš„éƒ¨ä»¶ï¼Œä½†ç°åœ¨æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨åšæ›´å¤šçš„äº‹æƒ…ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæˆ‘ä»¬çš„èƒŒæ™¯è®¾ç½® colorPrimary é¢œè‰²ï¼ˆå¦åˆ™å·¥å…·æ å°†æ˜¯é€æ˜çš„ï¼‰ã€‚
- RecyclerView åœ¨ XML æ–‡ä»¶ä¸­å®ç°èµ·æ¥éå¸¸ç®€å•ï¼Œç›´åˆ°åœ¨ java ä»£ç ä¸­æ­£ç¡®é…ç½®å®ƒï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ‰ä¸ä¼šæŠ›å‡º java.lang.NullPointerExceptionï¼ˆå®ƒä¸æœªé…ç½®çš„ LayoutAdapter è¿æ¥ï¼Œè¯¥é€‚é…å™¨å¯ä»¥é‡æ–°å®‰è£… recyclerview ä¸­çš„é¡¹ï¼‰ã€‚
- é«˜åº¦ ä¸é€‚ç”¨äº Android çš„ pre-21 è®¾å¤‡ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºæˆ‘ä»¬çš„ Floating Action Button çœŸçš„æµ®åŠ¨ï¼Œæˆ‘ä»¬å¿…é¡»ä¸º v21 å’Œ pre-21 çš„è®¾å¤‡å®ç°ä¸åŒçš„èƒŒæ™¯ã€‚

#### æµ®åŠ¨æ“ä½œæŒ‰é’®

ä¸ºäº†ç®€åŒ–æˆ‘ä»¬åœ¨ FAB ä¸Šçš„å·¥ä½œï¼Œæˆ‘ä»¬å°†ä¸º v21 å’Œ pre-21 çš„è®¾å¤‡ä½¿ç”¨ä¸€äº›ä¸åŒçš„æ ·å¼ï¼š

-  v21 çš„æ ·å¼
  ![|center](http://frogermcs.github.io/images/2/fab-21.png)
- pre-21 çš„æ ·å¼
  ![|center](http://frogermcs.github.io/images/2/fab-pre21.png)

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæŒ‰é’®çš„èƒŒæ™¯åˆ›å»ºä¸¤ä¸ªä¸åŒçš„ XML æ–‡ä»¶ï¼šç”¨äº v21 çš„ä½äº /res/drawable-v21/btn_fab_default.xml å’Œç”¨äº pre-21 çš„ä½äº /res/drawable/btn_fab_default.xmlï¼š
```xml
<?xml version="1.0" encoding="utf-8"?>
<!--drawable-v21/btn_fab_default.xml-->
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    android:color="@color/fab_color_shadow">
    <item>
        <shape android:shape="oval">
            <solid android:color="@color/style_color_accent" />
        </shape>
    </item>
</ripple>
```

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--drawable/btn_fab_default.xml-->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="false">
        <layer-list>
            <item android:bottom="0dp" android:left="2dp" android:right="2dp" android:top="2dp">
                <shape android:shape="oval">
                    <solid android:color="@color/fab_color_shadow" />
                </shape>
            </item>

            <item android:bottom="2dp" android:left="2dp" android:right="2dp" android:top="2dp">
                <shape android:shape="oval">
                    <solid android:color="@color/style_color_accent" />
                </shape>
            </item>
        </layer-list>
    </item>
    <item android:state_pressed="true">
        <shape android:bottom="2dp" android:left="2dp" android:right="2dp" android:shape="oval" android:top="2dp">
            <solid android:color="@color/fab_color_pressed" />
        </shape>
    </item>
</selector>
```
æ­¤å¤–ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ res / values / colors.xml æ–‡ä»¶ä¸­æ·»åŠ ä¸¤ç§é¢œè‰²ï¼š
```xml
<color name="btn_default_light_normal">#00000000</color>
<color name="btn_default_light_pressed">#40ffffff</color>
```
æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸º pre-21 çš„è®¾å¤‡åˆ¶ä½œé˜´å½±æ•ˆæœæœ‰ç‚¹æ£˜æ‰‹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ²¡æœ‰ç®€å•çš„æ–¹æ³•é€šè¿‡ XML æ–‡ä»¶æ¥å®ç°â€œçœŸå®â€é˜´å½±ã€‚ å…¶ä»–é€‰é¡¹æ˜¯ä½¿ç”¨å‡†å¤‡å¥½çš„è¾ƒæ—©çš„é˜´å½±å›¾åƒï¼Œæˆ–ç›´æ¥åœ¨ Java ä»£ç ä¸­ä½¿ç”¨ Outline ç±»ï¼ˆæç¤º[åˆ›å»º fab é˜´å½±](http://stackoverflow.com/questions/24480425/android-l-fab-button-shadow)ï¼‰æ¥å®Œæˆã€‚

#### å·¥å…·æ 
ç°åœ¨æˆ‘ä»¬æ¥å®Œæˆæˆ‘ä»¬çš„å·¥å…·æ ã€‚ æˆ‘ä»¬æœ‰èƒŒæ™¯å’Œåº”ç”¨æ ‡å¿—ï¼Œæ‰€ä»¥ç°åœ¨åªæœ‰å¯¼èˆªå’Œèœå•å›¾æ ‡ä¸¢å¤±ã€‚

ä¸å¹¸çš„æ˜¯ï¼ŒXML å€¼ app:navigationIcon =â€œ â€ ä¸å·¥ä½œï¼Œè€Œ Android:navigationIcon =â€œ â€ åªé€‚ç”¨äº v21ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»ä» Java ä»£ç è®¾ç½®å¯¼èˆªå›¾æ ‡ï¼š
```java
toolbar.setNavigationIcon(R.drawable.ic_menu_white);
```
å¯¹äºèœå•å›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šè¿‡ res / menu / menu_main.xml å®šä¹‰çš„æ ‡å‡†é€‰é¡¹èœå•ï¼š
```xml
<!--menu_main.xml-->
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".MainActivity">
    <item
        android:id="@+id/action_inbox"
        android:icon="@drawable/ic_inbox_white"
        android:title="Inbox"
        app:showAsAction="always" />
</menu>
```
å¹¶ä»æ´»åŠ¨æºä»£ç ä¸­é™„åŠ ï¼š

```java
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
}
```
ç°åœ¨ï¼Œä¸€åˆ‡éƒ½åº”è¯¥å·¥ä½œï¼Œä½†æ­£å¦‚æˆ‘åœ¨ twitter ä¸Šæ‰€æåˆ°çš„ï¼Œåœ¨å•å‡»å¯¼èˆªæŒ‰é’®çš„é€‰æ‹©å™¨ä¸­å­˜åœ¨ä¸€äº›ä¸ä¸€è‡´ï¼š 

> ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œå•å‡»å¯¼èˆªæŒ‰é’®çš„é€‰æ‹©å™¨ä¸ [# materialdesign](https://twitter.com/hashtag/materialdesign?src=hash&ref_src=twsrc%5Etfw) ä¸­çš„èœå•å¤§å°ä¸åŒå—ï¼Ÿ[#androiddev](https://twitter.com/hashtag/androiddev?src=hash&ref_src=twsrc%5Etfw)Â [pic.twitter.com/SEuNMx16a1](http://t.co/SEuNMx16a1)
>
> â€” Mirek Stanek (@froger_mcs)Â November 8, 2014 [Twitter](https://twitter.com/froger_mcs/status/530995707080359936/photo/1?ref_src=twsrc%5Etfw&ref_url=http%3A%2F%2Ftwitframe.com%2Fshow%3Furl%3Dhttps%3A%2F%2Ftwitter.com%2Ffroger_mcs%2Fstatus%2F530995707080359936)

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»åšæ›´å¤šçš„å·¥ä½œã€‚é¦–å…ˆè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„èœå•é¡¹ï¼ˆres / layout / menu_item_view.xmlï¼‰åˆ›å»ºè‡ªå®šä¹‰è§†å›¾ï¼š
```java
<?xml version="1.0" encoding="utf-8"?>
<!--menu_item_view.xml-->
<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="?attr/actionBarSize"
    android:layout_height="?attr/actionBarSize"
    android:background="@drawable/btn_default_light"
    android:src="@drawable/ic_inbox_white" />
```

ç°åœ¨æˆ‘ä»¬å¿…é¡»åˆ›å»º onClick é€‰æ‹©å™¨ï¼Œç”¨äº v21ï¼ˆå¸¦æœ‰æ°´æ³¢çº¹æ•ˆæœï¼‰å’Œ pre-21 ï¼š
```java
<?xml version="1.0" encoding="utf-8"?>
<!--drawable-v21/btn_default_light.xml-->
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    android:color="@color/btn_default_light_pressed" />
```

```java
<?xml version="1.0" encoding="utf-8"?>
<!--drawable/btn_default_light.xml-->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@color/btn_default_light_normal" android:state_focused="false" android:state_pressed="false" />
    <item android:drawable="@color/btn_default_light_pressed" android:state_pressed="true" />
    <item android:drawable="@color/btn_default_light_pressed" android:state_focused="true" />
</selector>
```
æˆ‘ä»¬é¡¹ç›®ä¸­çš„æ‰€æœ‰é¢œè‰²åˆ—è¡¨åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š
```java
<?xml version="1.0" encoding="utf-8"?>
<!--colors.xml-->
<resources>
    <color name="style_color_primary">#2d5d82</color>
    <color name="style_color_primary_dark">#21425d</color>
    <color name="style_color_accent">#01bcd5</color>

    <color name="fab_color_pressed">#007787</color>
    <color name="fab_color_shadow">#44000000</color>

    <color name="btn_default_light_normal">#00000000</color>
    <color name="btn_default_light_pressed">#40ffffff</color>
</resources>
```
æˆ‘ä»¬åº”è¯¥åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯å°†æˆ‘ä»¬çš„è‡ªå®šä¹‰è§†å›¾æ”¾åˆ°èœå•é¡¹ä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ onCreateOptionsMenu () æ–¹æ³•ä¸­åšåˆ°è¿™ä¸€ç‚¹ï¼š
```java
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    inboxMenuItem = menu.findItem(R.id.action_inbox);
    inboxMenuItem.setActionView(R.layout.menu_item_view);
    return true;
}
```
å°±è¿™æ ·ã€‚æˆ‘ä»¬çš„å·¥å…·æ å·²ç»å‡†å¤‡å¥½äº†ã€‚ èœå•é¡¹çš„ onClick é€‰æ‹©å™¨è¿è¡Œæ­£å¸¸:
![|center](http://frogermcs.github.io/images/2/toolbar.png)

#### é¡¹ç›®
æˆ‘ä»¬åº”è¯¥å®ç°çš„æœ€åä¸€ä»¶äº‹æ˜¯åŸºäº RecyclerView çš„ Feed é¡¹ç›®ã€‚ç°åœ¨æˆ‘ä»¬å¿…é¡»è®¾ç½®ä¸¤ä»¶äº‹ï¼šå¸ƒå±€ç®¡ç†å™¨ï¼ˆRecyclerView å¿…é¡»çŸ¥é“å¦‚ä½•å®‰æ’é¡¹ç›®ï¼‰å’Œé€‚é…å™¨ï¼ˆæä¾›é¡¹ç›®ï¼‰ã€‚

ç¬¬ä¸€ä»¶äº‹æ˜¯ç®€å•çš„ - è™½ç„¶æˆ‘ä»¬çš„å¸ƒå±€æ˜¯ç®€å•çš„ ListViewï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ LinearLayoutManager æ¥è¿›è¡Œé¡¹ç›®çš„æ’åˆ—ã€‚å¯¹äºç¬¬äºŒä»¶ï¼Œæˆ‘ä»¬å¿…é¡»åšæ›´å¤šçš„å·¥ä½œï¼Œä½†æ˜¯æ²¡æœ‰ä»€ä¹ˆé­”æ³•å¯ä»¥å¤„ç†ã€‚

æˆ‘ä»¬ä»å®šä¹‰åˆ—è¡¨é¡¹ç›®å¸ƒå±€ï¼ˆres / layout / item_feed.xmlï¼‰å¼€å§‹ï¼š
```java
<?xml version="1.0" encoding="utf-8"?><!-- item_feed.xml -->
<android.support.v7.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card_view="http://schemas.android.com/apk/res-auto"
    android:id="@+id/card_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="8dp"
    card_view:cardCornerRadius="4dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_feed_top" />

        <io.github.froger.instamaterial.SquaredImageView
            android:id="@+id/ivFeedCenter"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <ImageView
            android:id="@+id/ivFeedBottom"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    </LinearLayout>
</android.support.v7.widget.CardView>
```
æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯:

- CardView - åŒ…è£…æˆ‘ä»¬çš„åˆ—è¡¨é¡¹ç›®çš„åœ†è§’å’Œé˜´å½±è½®å»“ï¼ˆé€‚ç”¨äº v21 å’Œ pre-21 ç‰ˆæœ¬ï¼‰ã€‚
- ç”¨äº Feed å…ƒç´ æ¨¡å‹çš„ ImageViewsï¼ˆSquaredImageView æ˜¯æˆ‘ä»¬çš„ ImageView çš„å®ç°ï¼Œå®ƒå…·æœ‰æ–¹å½¢å°ºå¯¸ï¼‰ã€‚

FeedAdapter ä¹Ÿéå¸¸ç®€å•ï¼š
```java
public class FeedAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {
    private static final int ANIMATED_ITEMS_COUNT = 2;

    private Context context;
    private int lastAnimatedPosition = -1;
    private int itemsCount = 0;

    public FeedAdapter(Context context) {
        this.context = context;
    }

    @Override
    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        final View view = LayoutInflater.from(context).inflate(R.layout.item_feed, parent, false);
        return new CellFeedViewHolder(view);
    }

    private void runEnterAnimation(View view, int position) {
        if (position >= ANIMATED_ITEMS_COUNT - 1) {
            return;
        }

        if (position > lastAnimatedPosition) {
            lastAnimatedPosition = position;
            view.setTranslationY(Utils.getScreenHeight(context));
            view.animate()
                    .translationY(0)
                    .setInterpolator(new DecelerateInterpolator(3.f))
                    .setDuration(700)
                    .start();
        }
    }

    @Override
    public void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int position) {
        runEnterAnimation(viewHolder.itemView, position);
        CellFeedViewHolder holder = (CellFeedViewHolder) viewHolder;
        if (position % 2 == 0) {
            holder.ivFeedCenter.setImageResource(R.drawable.img_feed_center_1);
            holder.ivFeedBottom.setImageResource(R.drawable.img_feed_bottom_1);
        } else {
            holder.ivFeedCenter.setImageResource(R.drawable.img_feed_center_2);
            holder.ivFeedBottom.setImageResource(R.drawable.img_feed_bottom_2);
        }
    }

    @Override
    public int getItemCount() {
        return itemsCount;
    }

    public static class CellFeedViewHolder extends RecyclerView.ViewHolder {
        @InjectView(R.id.ivFeedCenter)
        SquaredImageView ivFeedCenter;
        @InjectView(R.id.ivFeedBottom)
        ImageView ivFeedBottom;

        public CellFeedViewHolder(View view) {
            super(view);
            ButterKnife.inject(this, view);
        }
    }

    public void updateItems() {
        itemsCount = 10;
        notifyDataSetChanged();
    }
}
```
æ²¡ä»€ä¹ˆç‰¹åˆ«éœ€è¦è¯´çš„ã€‚

ä¸ºäº†å°†æ‰€æœ‰ä¸œè¥¿æ”¾åœ¨ MainActivity ç±»ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†è¿™ä¸ªæ–¹æ³•ï¼š
```java
private void setupFeed() {
    LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);
    rvFeed.setLayoutManager(linearLayoutManager);
    feedAdapter = new FeedAdapter(this);
    rvFeed.setAdapter(feedAdapter);
}
```
ç°åœ¨å°±è¿™äº›äº†ã€‚è¿™é‡Œæ˜¯ MainActivity ç±»çš„å®Œæ•´æºä»£ç ï¼š

```java
//MainActivity.java
public class MainActivity extends ActionBarActivity {
    @InjectView(R.id.toolbar)
    Toolbar toolbar;
    @InjectView(R.id.rvFeed)
    RecyclerView rvFeed;

    private MenuItem inboxMenuItem;
    private FeedAdapter feedAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ButterKnife.inject(this);

        setupToolbar();
        setupFeed();
    }

    private void setupToolbar() {
        setSupportActionBar(toolbar);
        toolbar.setNavigationIcon(R.drawable.ic_menu_white);
    }

    private void setupFeed() {
        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);
        rvFeed.setLayoutManager(linearLayoutManager);
        feedAdapter = new FeedAdapter(this);
        rvFeed.setAdapter(feedAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_main, menu);
        inboxMenuItem = menu.findItem(R.id.action_inbox);
        inboxMenuItem.setActionView(R.layout.menu_item_view);
        return true;
    }
}
```
å¦‚æœä½ åœ¨è¿™é‡Œé—æ¼äº†ä¸€äº›ä¸œè¥¿ï¼Œä½ å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬[åœ¨è¿™ä¸€åˆ»çš„é¡¹ç›®æäº¤](https://github.com/frogermcs/InstaMaterial/commit/1095d5f199ceb5c04bb2433c8865dcea2cba6f2e)ã€‚ å½“æ‚¨åœ¨æ‚¨çš„è®¾å¤‡ä¸Šæ„å»ºå¹¶è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹å±å¹•ï¼š
- v21
  ![|center](http://frogermcs.github.io/images/2/screen-21.png)
- pre-21

  ![|center](http://frogermcs.github.io/images/2/screen-pre21.png)

## åŠ¨ç”»
è¦å®ç°çš„æœ€åå’Œæœ€é‡è¦çš„äº‹æƒ…æ˜¯ä»‹ç»åŠ¨ç”»ã€‚ å†çœ‹ä¸€éæ¦‚å¿µè§†é¢‘ï¼Œè®©æˆ‘ä»¬åˆ—å‡ºæ‰€æœ‰åœ¨ MainActivity å¼€å§‹æ—¶æ‰§è¡Œçš„åŠ¨ç”»ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†æˆä¸¤ä¸ªæ­¥éª¤:

- æ˜¾ç¤ºå¸¦æœ‰å†…éƒ¨å…ƒç´ çš„å·¥å…·æ 
- åœ¨å·¥å…·æ åŠ¨ç”»å®Œæˆåæ˜¾ç¤ºé¡¹ç›®å’Œæµ®åŠ¨åŠ¨ä½œæŒ‰é’®ã€‚

å·¥å…·æ é¡¹ç›®åŠ¨ç”»åœ¨çŸ­æ—¶é—´å†…ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œã€‚å®ç°è¿™ä¸ªåŠ¨ç”»çš„ä¸»è¦é—®é¢˜æ˜¯å¯¼èˆªå›¾æ ‡â€”â€”æˆ‘ä»¬æ— æ³•åŠ¨ç”»çš„å”¯ä¸€å…ƒç´ ã€‚ å‰©ä¸‹çš„å°±å¾ˆç®€å•äº†ã€‚

#### å·¥å…·æ åŠ¨ç”»

é¦–å…ˆï¼Œæˆ‘ä»¬åªæƒ³åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼ˆè€Œä¸æ˜¯åœ¨è¿™ä¹‹åï¼Œæˆ‘ä»¬å°†æ—‹è½¬æˆ‘ä»¬çš„è®¾å¤‡ï¼‰åŠ¨ç”»æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚åŒæ—¶è¯·è®°ä½ï¼Œæˆ‘ä»¬æ­£åœ¨å¯åŠ¨ onCreate () æ–¹æ³•ä¸­æ²¡æœ‰çš„èœå•é¡¹(æˆ‘ä»¬æ­£åœ¨ createoptionsmenu () ä¸­åˆå§‹åŒ–å®ƒ)ã€‚

è®©æˆ‘ä»¬å°† pendingIntroAnimation å¸ƒå°”å€¼æ·»åŠ åˆ°æˆ‘ä»¬çš„ MainActivity ä¸­ã€‚æˆ‘ä»¬å°†åœ¨ onCreate () æ–¹æ³•ä¸­åˆå§‹åŒ–å®ƒï¼š
```java
//...
if (savedInstanceState == null) {
    pendingIntroAnimation = true;
}
```
å¹¶åœ¨ onCreateOptionsMenu () ä¸­ä½¿ç”¨ï¼š
```java
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    inboxMenuItem = menu.findItem(R.id.action_inbox);
    inboxMenuItem.setActionView(R.layout.menu_item_view);
    if (pendingIntroAnimation) {
        pendingIntroAnimation = false;
        startIntroAnimation();
    }
    return true;
}
```
startIntroAnimation () åœ¨æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¹‹åå°†è¢«è°ƒç”¨ä¸€æ¬¡ã€‚

ç°åœ¨æ˜¯æ—¶å€™ä¸ºå·¥å…·æ åŠå…¶å†…éƒ¨é¡¹ç›®å‡†å¤‡åŠ¨ç”»äº†ã€‚è¿™ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚è¯·è®°ä½ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒåŠ¨ç”»æ˜¯ç”±ä¸¤ä¸ªæ­¥éª¤ç»„æˆçš„ï¼š

- å‡†å¤‡ - åœ¨è¿™é‡Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸ªåŠ¨ç”»å…ƒç´ è®¾ç½®åˆå§‹çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œæ‰©å±•åŠ¨ç”»ï¼Œè¿™é‡Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æˆ‘ä»¬çš„é¡¹ç›®æ˜¯éšè—çš„ã€‚
- åŠ¨ç”» - åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„è§†å›¾æ˜¯åŠ¨ç”»çš„æœ€ç»ˆçŠ¶æ€æˆ– / å’Œä½ç½®

é‚£ä¹ˆï¼Œæˆ‘ä»¬æ¥å°è¯•å®ç°å·¥å…·æ åŠ¨ç”»çš„ä¸¤ä¸ªæ­¥éª¤ï¼š
```java
//...
private static final int ANIM_DURATION_TOOLBAR = 300;

private void startIntroAnimation() {
    btnCreate.setTranslationY(2 * getResources().getDimensionPixelOffset(R.dimen.btn_fab_size));
    
    int actionbarSize = Utils.dpToPx(56);
    toolbar.setTranslationY(-actionbarSize);
    ivLogo.setTranslationY(-actionbarSize);
    inboxMenuItem.getActionView().setTranslationY(-actionbarSize);

    toolbar.animate()
            .translationY(0)
            .setDuration(ANIM_DURATION_TOOLBAR)
            .setStartDelay(300);
    ivLogo.animate()
            .translationY(0)
            .setDuration(ANIM_DURATION_TOOLBAR)
            .setStartDelay(400);
    inboxMenuItem.getActionView().animate()
            .translationY(0)
            .setDuration(ANIM_DURATION_TOOLBAR)
            .setStartDelay(500)
            .setListener(new AnimatorListenerAdapter() {
                @Override
                public void onAnimationEnd(Animator animation) {
                    startContentAnimation();
                }
            })
            .start();
}
//...
```
æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„æ˜¯:

- é¦–å…ˆï¼ŒæŠŠæ‰€æœ‰çš„å…ƒç´ éƒ½éšè—èµ·æ¥ï¼ŒæŠŠå®ƒä»¬ä»å±å¹•ä¸Šå¹³ç§»å‡ºæ¥(åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¿˜éšè—äº† FAB)ã€‚
- åŠ¨ç”»å·¥å…·æ å’Œå†…éƒ¨é¡¹ç›®ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªã€‚
- åŠ¨ç”»å®Œæˆåï¼Œä¸ºå†…å®¹æ·»åŠ åŠ¨ç”»ï¼ˆFAB å’Œ Feed é¡¹ç›®ï¼‰ã€‚

å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ

#### å†…å®¹åŠ¨ç”»

åœ¨è¿™ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åŠ¨ç”»ä¸¤ä¸ªä¸œè¥¿: FAB å’Œ Feedã€‚ è™½ç„¶ FAB åŠ¨ç”»éå¸¸ç®€å•(åªè¦åšä¸Šé¢æè¿°çš„ç±»ä¼¼æ“ä½œ) ï¼ŒåŠ¨ç”» Feed é¡¹ç›®æ˜¯ä¸€ä¸ªæœ‰ç‚¹æ£˜æ‰‹ã€‚

å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¿æŒ feedAdapter ä¸ºç©ºï¼Œå¹¶åœ¨æˆ‘ä»¬æƒ³è¦åŠ¨ç”»é¡¹ç›®çš„æ—¶å€™å¡«å……å®ƒã€‚ ç„¶ååœ¨é€‚é…å™¨ä¸­ç›´æ¥åŠ¨ç”»å®ƒä»¬ï¼ŒåŒæ—¶åˆ›å»ºé¡¹ç›®ã€‚ åœ¨çœŸæ­£çš„ä»£ç ä¸­å®ƒçœ‹èµ·æ¥åƒä»€ä¹ˆï¼Ÿ çœ‹ä¸€çœ‹:

- startContentAnimation () æ–¹æ³•
```java
//...
//FAB animation
private static final int ANIM_DURATION_FAB = 400;

private void startContentAnimation() {
    btnCreate.animate()
            .translationY(0)
            .setInterpolator(new OvershootInterpolator(1.f))
            .setStartDelay(300)
            .setDuration(ANIM_DURATION_FAB)
            .start();
    feedAdapter.updateItems();
}
//...
```
- FeedAdapter ä¸åŠ¨ç”» feed é¡¹ç›®
```java
public class FeedAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {
    private static final int ANIMATED_ITEMS_COUNT = 2;

    private Context context;
    private int lastAnimatedPosition = -1;
    private int itemsCount = 0;

    public FeedAdapter(Context context) {
        this.context = context;
    }

    @Override
    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        final View view = LayoutInflater.from(context).inflate(R.layout.item_feed, parent, false);
        return new CellFeedViewHolder(view);
    }

    private void runEnterAnimation(View view, int position) {
        if (position >= ANIMATED_ITEMS_COUNT - 1) {
            return;
        }

        if (position > lastAnimatedPosition) {
            lastAnimatedPosition = position;
            view.setTranslationY(Utils.getScreenHeight(context));
            view.animate()
                    .translationY(0)
                    .setInterpolator(new DecelerateInterpolator(3.f))
                    .setDuration(700)
                    .start();
        }
    }

    @Override
    public void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int position) {
        runEnterAnimation(viewHolder.itemView, position);
        CellFeedViewHolder holder = (CellFeedViewHolder) viewHolder;
        if (position % 2 == 0) {
            holder.ivFeedCenter.setImageResource(R.drawable.img_feed_center_1);
            holder.ivFeedBottom.setImageResource(R.drawable.img_feed_bottom_1);
        } else {
            holder.ivFeedCenter.setImageResource(R.drawable.img_feed_center_2);
            holder.ivFeedBottom.setImageResource(R.drawable.img_feed_bottom_2);
        }
    }

    @Override
    public int getItemCount() {
        return itemsCount;
    }

    public static class CellFeedViewHolder extends RecyclerView.ViewHolder {
        @InjectView(R.id.ivFeedCenter)
        SquaredImageView ivFeedCenter;
        @InjectView(R.id.ivFeedBottom)
        ImageView ivFeedBottom;

        public CellFeedViewHolder(View view) {
            super(view);
            ButterKnife.inject(this, view);
        }
    }

    public void updateItems() {
        itemsCount = 10;
        notifyDataSetChanged();
    }
}
```
å°±è¿™æ ·ï¼å¦‚æœæˆ‘ä»¬æ„å»ºå¹¶è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬æœ‰æœ€åç‰ˆæœ¬æ˜¾ç¤ºåœ¨æœ¬å¸–çš„å¼€å¤´ã€‚ å¦‚æœä½ é”™è¿‡äº†ä¸€äº›ä¸œè¥¿ï¼Œè¿™é‡Œæ˜¯[è¿™é‡Œæ˜¯å®ç°åŠ¨ç”»çš„é¡¹ç›®æäº¤](https://github.com/frogermcs/InstaMaterial/commit/4e838861c5f858711b1072777cae2325ce12ee21)ã€‚

## æºä»£ç  

æ‰€æè¿°ç¤ºä¾‹çš„å®Œæ•´æºä»£ç åœ¨ Github [å­˜å‚¨åº“](https://github.com/frogermcs/InstaMaterial)ä¸Šå¯ç”¨ã€‚


